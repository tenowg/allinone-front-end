<div class="row">
  <div class="col-sm-12">
    <div class="x_panel tile">
      <div class="x_title">
        <h3>Select Group you wish to edit, or create.</h3>
        <div class="clearfix"></div>
      </div>
      <div class="x_content">
        <ng-select [items]="groups"
            [addTag]="addTag.bind(this)"
            appendTo="body"
            bindLabel="name"
            [loading]="loading"
            [clearable]="false"
            [(ngModel)]="selectedCompany">
            <ng-template ng-option-tmp let-item="item" let-index="index" let-search="searchTerm">
              <div>{{item.name}}</div>
            </ng-template>
        </ng-select>
        <div class="divider" *ngIf="!selectedCompany.original"></div>
        <div class="text-center" *ngIf="!selectedCompany.original">
          <button type="button" class="btn btn-success" (click)="save()">Save ({{selectedCompany.name}})</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row" *ngIf="!selectedCompany.original">
  <div class="col-sm-4">
    <div class="x_panel tile">
      <div class="x_title">
        <h3>Edit Permission</h3>
        <div class="clearfix"></div>
      </div>
      <div class="x_content">
        <ng-select [items]="permlist"
          appendTo="body"
          bindLabel="permission"
          multiple="true"
          [loading]="loading"
          [(ngModel)]="selectedCompany.granted">
          <ng-template ng-option-tmp let-item="item" let-index="index" let-search="searchTerm">
            <div>{{item.permission}}</div>
            <p>{{item.description}}</p>
          </ng-template>
        </ng-select>
      </div>
    </div>
  </div>
  <div class="col-sm-4">
    <div class="x_panel tile">
      <div class="x_title">
        <h3>Edit Filters</h3>
        <div class="clearfix"></div>
      </div>
      <div class="x_content">
        <div class="container">
          <p>Alliances:</p>
          <div class="row">
              <ng-select [items]="alliances"
              appendTo="body"
              bindLabel="name"
              multiple="true"
              [loading]="loading"
              [(ngModel)]="selectedCompany.filters.alliances">
            </ng-select>
          </div>
          <p>Corporations:</p>
          <div class="row">
            <ng-select [items]="corporations"
              appendTo="body"
              bindLabel="name"
              multiple="true"
              [loading]="loading"
              [(ngModel)]="selectedCompany.filters.corporations">
            </ng-select>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-sm-4">
    <div class="x_panel tile">
      <div class="x_title">
        <h3>Inverse Filters</h3>
        <div class="clearfix"></div>
      </div>
      <div class="x_content">
        <div class="container">
          <p>Alliances:</p>
          <div class="row">
            <ng-select [items]="alliances"
              appendTo="body"
              bindLabel="name"
              multiple="true"
              [loading]="loading"
              [(ngModel)]="selectedCompany.inverse.alliances">
            </ng-select>
          </div>
          <p>Corporations:</p>
          <div class="row">
            <ng-select [items]="corporations"
              appendTo="body"
              bindLabel="name"
              multiple="true"
              [loading]="loading"
              [(ngModel)]="selectedCompany.inverse.corporations">
            </ng-select>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
